{{- if strings.HasPrefix .Destination "spotify:" -}}
  {{- $parts := split (strings.TrimPrefix "spotify:" .Destination) "/" -}}
  {{- $type := index $parts 0 | default "track" -}}
  {{- $id := index $parts 1 -}}
  <iframe src="https://open.spotify.com/embed/{{ $type }}/{{ $id }}" width="100%" height="152" frameborder="0" allowtransparency="true" allow="encrypted-media" class="spotify"></iframe>
{{- else if strings.HasPrefix .Destination "youtube:" -}}
  {{- $id := strings.TrimPrefix "youtube:" .Destination -}}
  <div class="youtube-placeholder" data-youtube-id="{{ $id }}">
    <div class="youtube-placeholder__loading">
      <div class="youtube-placeholder__spinner"></div>
      <p class="youtube-placeholder__text">読み込み中...</p>
    </div>
    <iframe 
      data-src="https://www.youtube.com/embed/{{ $id }}" 
      width="100%" 
      height="315" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen 
      class="youtube"
      style="display: none;">
    </iframe>
  </div>
{{- else -}}
  <a href="{{ .Destination }}"{{ with .Title}} title="{{ . }}"{{ end }}>{{ .Text | safeHTML }}</a>
{{- end -}}

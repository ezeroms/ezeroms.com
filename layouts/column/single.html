{{ define "section_header" }}
    {{ partial "column-header-nav.html" . }}
{{ end }}

{{ define "main" }}
    {{ partial "notification.html" . }}

    <section class="page-section">
        <div class="page-section__content">
            <ul class="article-container">
                <article class="article-item">
                    <div class="article-header">
                        <p class="date">Column · {{ .Date | dateFormat "Jan 2" }} · {{ .Date | dateFormat "Mon" }} · {{ .Date | dateFormat "2006" }}</p>
                        <h1>{{ .Title }}</h1>
                        {{ if .Params.column_tag }}
                            <div class="article-header__tags">
                                {{ $sortedTags := sort .Params.column_tag }}
                                {{ range $sortedTags }}
                                    <a href="/column_tag/{{ . | urlize }}/" class="tag" data-tag="{{ . }}">{{ . }}</a>
                                {{ end }}
                            </div>
                        {{ end }}
                    </div>
                    {{ .Content | replaceRE "<img ([^>]+)>" "<div class=\"image-wrapper\"><img $1></div>" | safeHTML }}
                </article>
                
                {{ partial "article-navigation.html" . }}
            </ul>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 記事内のタグクリックイベント
            document.querySelectorAll('.article-item .tag').forEach(tag => {
                tag.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tagValue = this.getAttribute('data-tag');
                    if (tagValue) {
                        window.location.href = '/column/?tag=' + encodeURIComponent(tagValue);
                    }
                });
            });
        });
    </script>
{{ end }}

{{ define "secondary" }}
    {{ partial "column_menu.html" . }}
{{ end }}


{{ define "section_header" }}
    {{ $componentsPages := where .Site.RegularPages "Section" "ui-design-book" }}
    {{ $componentsPages = where $componentsPages "Params.tags" "intersect" (slice "components") }}
    {{ $firstComponent := "" }}
    {{ if gt (len $componentsPages) 0 }}
        {{ $sortedComponents := sort $componentsPages "Title" "asc" }}
        {{ $firstComponent = index $sortedComponents 0 }}
    {{ end }}

    {{ $patternsPages := where .Site.RegularPages "Section" "ui-design-book" }}
    {{ $patternsPages = where $patternsPages "Params.tags" "intersect" (slice "patterns") }}
    {{ $firstPattern := "" }}
    {{ if gt (len $patternsPages) 0 }}
        {{ $sortedPatterns := sort $patternsPages "Title" "asc" }}
        {{ $firstPattern = index $sortedPatterns 0 }}
    {{ end }}

    {{ $principlesPages := where .Site.RegularPages "Section" "ui-design-book" }}
    {{ $principlesPages = where $principlesPages "Params.tags" "intersect" (slice "principles") }}
    {{ $firstPrinciple := "" }}
    {{ if gt (len $principlesPages) 0 }}
        {{ $sortedPrinciples := sort $principlesPages "Title" "asc" }}
        {{ $firstPrinciple = index $sortedPrinciples 0 }}
    {{ end }}

    {{ $currentCategory := "" }}
    {{ if .Params.tags }}
        {{ range .Params.tags }}
            {{ if eq . "components" }}
                {{ $currentCategory = "components" }}
            {{ else if eq . "patterns" }}
                {{ $currentCategory = "patterns" }}
            {{ else if eq . "principles" }}
                {{ $currentCategory = "principles" }}
            {{ end }}
        {{ end }}
    {{ end }}

    <div class="column-header">
        <nav class="column-header__nav" id="ui-design-book-category-filters">
            <a href="/ui-design-book/" class="column-header__tab{{ if eq .RelPermalink "/ui-design-book/" }} active{{ end }}">Readme</a>
            {{ if $firstComponent }}
                <a href="{{ $firstComponent.RelPermalink }}" class="column-header__tab{{ if eq $currentCategory "components" }} active{{ end }}">Components</a>
            {{ else }}
                <span class="column-header__tab">Components</span>
            {{ end }}
            {{ if $firstPattern }}
                <a href="{{ $firstPattern.RelPermalink }}" class="column-header__tab{{ if eq $currentCategory "patterns" }} active{{ end }}">Patterns</a>
            {{ else }}
                <span class="column-header__tab">Patterns</span>
            {{ end }}
            {{ if $firstPrinciple }}
                <a href="{{ $firstPrinciple.RelPermalink }}" class="column-header__tab{{ if eq $currentCategory "principles" }} active{{ end }}">Principles</a>
            {{ else }}
                <span class="column-header__tab">Principles</span>
            {{ end }}
        </nav>
    </div>
{{ end }}

{{ define "main" }}
    {{ partial "notification.html" . }}

    <section class="diary-main">
        <div class="diary-main__content">
            <ul class="article-container">
                <article class="article-item">
                    <h1>{{ .Title }}</h1>
                    {{ if .Params.description }}
                        <p class="article-item__description">{{ .Params.description }}</p>
                    {{ end }}
                    {{ .Content | replaceRE "<img ([^>]+)>" "<div class=\"image-wrapper\"><img $1></div>" | safeHTML }}
                </article>
            </ul>
        </div>
    </section>

    <!-- debug-info -->
    <p class="debug-info">Template : /layouts/ui-design-book/single.html</p>
{{ end }}

{{ define "secondary" }}
{{ end }}


{{/* Aboutセクション用モバイルヘッダー */}}
<div class="mobile-header" id="mobile-header-about">
    <!-- ハンバーガーメニューボタン（左側） -->
    <button class="mobile-header__hamburger" id="sidebar-hamburger-btn" aria-label="メニューを開く" aria-expanded="false">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 5H17M3 10H17M3 15H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
    
    <!-- ページタイトル（中央） -->
    <h2 class="mobile-header__title">
        {{ if eq .RelPermalink "/about/profile/" }}
            プロフィール
        {{ else if eq .RelPermalink "/about/site/" }}
            このサイトについて
        {{ else if or (eq .RelPermalink "/about/media-coverage/") (strings.HasPrefix .RelPermalink "/about/media-coverage/") }}
            メディア掲載
        {{ else if eq .RelPermalink "/about/contact/" }}
            お問い合わせ
        {{ else }}
            About
        {{ end }}
    </h2>
    
    <!-- 目次ボタン（右側） -->
    <button class="mobile-header__button" id="mobile-header-about-btn" aria-label="目次を開く" aria-expanded="false">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
</div>

{{/* ハーフモーダル */}}
<div class="half-modal__overlay" id="half-modal-about-overlay"></div>
<div class="half-modal" id="half-modal-about">
    <div class="half-modal__header">
        <h3 class="half-modal__title">目次</h3>
        <button class="half-modal__close" id="half-modal-about-close" aria-label="閉じる">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>
    <div class="half-modal__content">
        <ul class="half-modal__list">
            <li class="half-modal__item">
                <a href="/about/profile/" class="half-modal__link{{ if eq .RelPermalink "/about/profile/" }} active{{ end }}">プロフィール</a>
            </li>
            <li class="half-modal__item">
                <a href="/about/site/" class="half-modal__link{{ if eq .RelPermalink "/about/site/" }} active{{ end }}">このサイトについて</a>
            </li>
            <li class="half-modal__item">
                <a href="/about/media-coverage/" class="half-modal__link{{ if or (eq .RelPermalink "/about/media-coverage/") (strings.HasPrefix .RelPermalink "/about/media-coverage/") }} active{{ end }}">メディア掲載</a>
            </li>
            <li class="half-modal__item">
                <a href="/about/contact/" class="half-modal__link{{ if eq .RelPermalink "/about/contact/" }} active{{ end }}">お問い合わせ</a>
            </li>
        </ul>
    </div>
</div>

<script>
(function() {
    if (window.innerWidth > 1079) return; // PCでは実行しない
    
    const header = document.getElementById('mobile-header-about');
    const button = document.getElementById('mobile-header-about-btn');
    const modal = document.getElementById('half-modal-about');
    const overlay = document.getElementById('half-modal-about-overlay');
    const closeBtn = document.getElementById('half-modal-about-close');
    
    if (!header || !button || !modal || !overlay || !closeBtn) return;
    
    function openModal() {
        modal.classList.add('is-open');
        overlay.classList.add('is-active');
        button.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
        modal.classList.remove('is-open');
        overlay.classList.remove('is-active');
        button.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
    }
    
    button.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.classList.contains('is-open')) {
            closeModal();
        }
    });
})();
</script>


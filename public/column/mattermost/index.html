<!doctype html><html lang=en><head><meta charset=UTF-8><title>Mattermostをセルフホスティングする</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js></script><script>hljs.highlightAll()</script><link rel=stylesheet href=/css/main.css><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/x-icon href=/images/common/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/images/common/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/images/common/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/common/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=192x192 href=/images/common/favicon/favicon-192x192.png><link rel=apple-touch-icon sizes=180x180 href=/images/common/favicon/apple-touch-icon.png><meta property="og:title" content="Mattermostをセルフホスティングする"><meta property="og:description" content="One thing I can tell you is you got to be free!"><meta property="og:type" content="website"><meta property="og:url" content="https://ezeroms.com/column/mattermost/"><meta property="og:image" content="https://ezeroms.com/images/common/og-image.png"><meta property="og:site_name" content="ezeroms.com"><meta property="og:locale" content="ja_JP"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Mattermostをセルフホスティングする"><meta name=twitter:description content="One thing I can tell you is you got to be free!"><meta name=twitter:image content="https://ezeroms.com/images/common/og-image.png"></head><body class=is-column><div class=sidebar__overlay id=sidebar-overlay></div><div class=layout-container><aside class=layout-sidebar aria-label=グローバルナビゲーション><div class=sidebar><div class=sidebar__main><div class=sidebar__logo><a href=/><img src=/images/common/logo.svg alt=ezeroms.com>
</a><button class=sidebar__minimize-btn id=sidebar-minimize-btn aria-label=サイドバーを最小化 data-tooltip=メニューを非表示にする>
<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M10 12 6 8l4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div><nav class=sidebar__nav-group aria-label=グローバルナビゲーション><ul class=sidebar__nav><li><a href=/about/profile/>About</a></li><li><a href=/tweet_month/2025-06/>Tweet</a></li><li><a href=/diary_month/2025-09/>Diary</a></li><li><a class=is-active href=/column/>Column</a></li><li><a href=/work/>Work</a></li></ul><div class=sidebar__library><h3 class=sidebar__library-heading>Library</h3><ul class=sidebar__nav><li><a href=/shoulders-of-giants/>The shoulders of Giants</a></li></ul></div></nav></div></div></aside><div class=layout-body><div class=mobile-header id=mobile-header-column><button class=mobile-header__hamburger id=sidebar-hamburger-btn aria-label=メニューを開く aria-expanded=false>
<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M3 5H17M3 10H17M3 15H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button><h2 class=mobile-header__title>すべて</h2><button class=mobile-header__button id=mobile-header-column-btn aria-label=カテゴリを選択 aria-expanded=false>
<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 7.5l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div><div class=half-modal__overlay id=half-modal-column-overlay></div><div class=half-modal id=half-modal-column><div class=half-modal__header><h3 class=half-modal__title>カテゴリを選択</h3><button class=half-modal__close id=half-modal-column-close aria-label=閉じる>
<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M13.5 4.5l-9 9m0-9 9 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div><div class=half-modal__content><ul class=half-modal__list><li class=half-modal__item><a href=/column/ class=half-modal__link>すべて</a></li><li class=half-modal__item><a href=/column_category/books-and-magazines/ class=half-modal__link>本・雑誌</a></li><li class=half-modal__item><a href=/column_category/design-and-creative/ class=half-modal__link>デザイン・クリエイティブ</a></li><li class=half-modal__item><a href=/column_category/foreign-cultures/ class=half-modal__link>海外文化</a></li><li class=half-modal__item><a href=/column_category/internet-and-technology/ class=half-modal__link>インターネット・技術</a></li><li class=half-modal__item><a href=/column_category/manga-and-anime/ class=half-modal__link>漫画・アニメ</a></li><li class=half-modal__item><a href=/column_category/movies-and-dramas/ class=half-modal__link>映画・ドラマ</a></li><li class=half-modal__item><a href=/column_category/natural-science/ class=half-modal__link>自然科学</a></li></ul></div></div><script>(function(){if(window.innerWidth>1079)return;const e="column",a=document.getElementById("mobile-header-"+e),t=document.getElementById("mobile-header-"+e+"-btn"),n=document.getElementById("half-modal-"+e),s=document.getElementById("half-modal-"+e+"-overlay"),i=document.getElementById("half-modal-"+e+"-close");if(!a||!t||!n||!s||!i)return;function r(){n.classList.add("is-open"),s.classList.add("is-active"),t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"}function o(){n.classList.remove("is-open"),s.classList.remove("is-active"),t.setAttribute("aria-expanded","false"),document.body.style.overflow=""}t.addEventListener("click",r),i.addEventListener("click",o),s.addEventListener("click",o),document.addEventListener("keydown",function(e){e.key==="Escape"&&n.classList.contains("is-open")&&o()})})()</script><div class=layout-header><div class=column-header><nav class=column-header__nav id=column-category-filters><a href=/column/ class=column-header__tab data-category=all>すべて</a>
<a href=/column_category/books-and-magazines/ class=column-header__tab data-category=books-and-magazines>本・雑誌</a>
<a href=/column_category/design-and-creative/ class=column-header__tab data-category=design-and-creative>デザイン・クリエイティブ</a>
<a href=/column_category/foreign-cultures/ class=column-header__tab data-category=foreign-cultures>海外文化</a>
<a href=/column_category/internet-and-technology/ class=column-header__tab data-category=internet-and-technology>インターネット・技術</a>
<a href=/column_category/manga-and-anime/ class=column-header__tab data-category=manga-and-anime>漫画・アニメ</a>
<a href=/column_category/movies-and-dramas/ class=column-header__tab data-category=movies-and-dramas>映画・ドラマ</a>
<a href=/column_category/natural-science/ class=column-header__tab data-category=natural-science>自然科学</a></nav></div></div><div class="layout-main layout-main--with-tags"><main class=layout-main__content id=main-content><div id=notification class=notification>リンクをコピーしました</div><section class=page-section><div class=page-section__content><ul class=article-container><article class=article-item><div class=article-header><p class=date>Column · May 22 · Thu · 2025</p><h1>Mattermostをセルフホスティングする</h1><div class=article-header__tags><a href=/column_tag/mattermost/ class=tag data-tag=Mattermost>Mattermost</a>
<a href=/column_tag/%E6%8A%80%E8%A1%93/ class=tag data-tag=技術>技術</a></div></div><div class=image-wrapper><img src=/images/diary/mattermost/47.png alt loading=lazy></div><h2 id=mattermostとは>Mattermostとは</h2><p>Mattermostは、Slackに似たUIを持つ、オープンソースのコラボレーションツールだ。</p><p>自分たちでサーバーを用意して運用する「セルフホスティング」に対応しており、ユーザー数や機能に応じて課金されることなく自由に使うことができる。すごい。これでSlack重税ともおさらばや！！</p><p><a href=https://mattermost.com/>https://mattermost.com/</a></p><h6 id=heading>　﻿</h6><div class=image-wrapper><img src=/images/diary/mattermost/44.png alt="Slack重税 2025年5月現在" loading=lazy></div><h2 id=mattermostセルフホスティングでできること>Mattermost（セルフホスティング）でできること</h2><ul><li>基本的なチャンネルベースのチャット（Slackと同様のUI）</li><li>ダイレクトメッセージ</li><li>チャンネルの公開設定（オープンチャンネル or プライベートチャンネル）</li><li>スレッド形式での返信</li><li>メンション @here, @channel, @username など</li><li>画像・PDFなどの添付＆プレビュー</li><li>iOS / Androidアプリあり（Mattermost公式）</li><li>投稿内でのMarkdown記法対応</li><li>Bot / Webhook: Incoming / Outgoing webhookあり</li><li>Plugin / Integration: Trello、GitLab、Jiraなどの連携プラグインあり</li></ul><h2 id=mattermostセルフホスティングでできないこと>Mattermost（セルフホスティング）でできないこと</h2><ul><li>音声通話: Slackのハドルのようなものは標準では非搭載（プラグインが必要）</li><li>画面共有: 上記のプラグインを使っても画面共有はできない</li><li>SAML / LDAP: Enterprise Editionならできるっぽい</li><li>監査ログ / EMM連携: Enterprise Editionならできるっぽい</li></ul><h6 id=heading-1>　﻿</h6><p>Slackの利用料を払うのが難しい規模のプロジェクトでは、Discordが使われることが多いと思う。</p><p>ただ、個人的にはDiscordのスレッド返信がどうにも使いづらく、結果としてテキストでのやり取りが整然と進められないのがずっと気になっていた。Mattermostではその点がしっかり解消されており、チャンネル内での会話の整理がしやすそうという印象。一方で、Discordのような「ゆるくつながる」音声通話のスタイルを大事にしたい場合には、Mattermostは少し堅すぎるというか、そういう用途にはあまり向いていない。</p><p>「本当はSlackのようなスタイルのコミュニケーションをしたいのだけど、仕方なくDiscordを使っている」というようなプロジェクトには、Mattermostはちょうどよい選択肢になると思う。</p><h6 id=heading-2>　﻿</h6><p>早速環境を用意してみたので、以下作業メモ。</p><h2 id=1-サーバーを用意する>1. サーバーを用意する</h2><p>さくらのVPSで 4Gプランを契約（記事執筆時で月額3,960円。年払いだともう少し安くなる）。</p><p>OSはUbuntu 22.04を選択。IPアドレスが払い出される。</p><p><a href=https://vps.sakura.ad.jp/>https://vps.sakura.ad.jp/</a></p><div class=image-wrapper><img src=/images/diary/mattermost/45.png alt loading=lazy></div><h6 id=heading-3>﻿</h6><p>契約後、コントロールパネルにアクセスしてサーバーを起動</p><p><a href=https://secure.sakura.ad.jp/vps/servers>https://secure.sakura.ad.jp/vps/servers</a></p><h2 id=2-sshでログインしてセットアップ開始>﻿2. SSHでログインしてセットアップ開始</h2><pre tabindex=0><code>ssh root@&lt;VPSのIPアドレス&gt;
</code></pre><p>最初に自動生成されたパスワードを使ってログイン</p><h2 id=3-初期設定dockerの導入>3. 初期設定＆Dockerの導入</h2><pre tabindex=0><code># パッケージ情報を更新
sudo apt update &amp;&amp; sudo apt upgrade -y

# Dockerとdocker-composeをインストール
sudo apt install -y docker.io docker-compose

# Dockerを自動起動するように設定
sudo systemctl enable docker
</code></pre><h2 id=4-mattermost用ディレクトリの作成>4﻿. Mattermost用ディレクトリの作成</h2><pre tabindex=0><code>sudo mkdir -p /opt/mattermost
cd /opt/mattermost
</code></pre><h2 id=5-docker-composeyml-の作成>5. docker-compose.yml の作成</h2><pre tabindex=0><code>sudo nano docker-compose.yml
</code></pre><pre tabindex=0><code>version: &#34;3&#34;

services:
  db:
    image: postgres:13
    restart: always
    environment:
      POSTGRES_USER: mmuser
      POSTGRES_PASSWORD: mmuser_password
      POSTGRES_DB: mattermost
    volumes:
      - ./volumes/db:/var/lib/postgresql/data

  app:
    image: mattermost/mattermost-team-edition
    restart: always
    ports:
      - &#34;8065:8065&#34;
    environment:
      MM_SQLSETTINGS_DRIVERNAME: postgres
      MM_SQLSETTINGS_DATASOURCE: postgres://mmuser:mmuser_password@db:5432/mattermost?sslmode=disable
      MM_SERVICESETTINGS_SITEURL: http://&lt;VPSのIPアドレス&gt;:8065
    volumes:
      - ./volumes/app/mattermost:/mattermost/data
    depends_on:
      - db
</code></pre><p>nanoの保存コマンド: Ctrl + O → Enter → Ctrl + X</p><h2 id=6-コンテナの起動>6. コンテナの起動</h2><pre tabindex=0><code>sudo docker-compose up -d
</code></pre><h2 id=7-サーバーのパケットフィルターを設定>7. サーバーのパケットフィルターを設定</h2><p>ポート 8065 でアクセスしたいので、パケットフィルターを設定する。ついでにこのあと必要なポートも登録しておく。</p><div class=image-wrapper><img src=/images/diary/mattermost/48.png alt loading=lazy></div><h2 id=8-動作確認>8. 動作確認</h2><p>ブラウザからVPSのIPアドレスを直叩きしてアクセス！</p><p><a href=http://160.16.197.152:8065>http://160.16.197.152:8065</a></p><div class=image-wrapper><img src=/images/diary/mattermost/49.png alt loading=lazy></div><h2 id=9-サブドメインの割り当て>9. サブドメインの割り当て</h2><p>ドメイン管理サービスでDNS設定</p><pre tabindex=0><code>host: chat
type: A
data: 160.16.197.152
</code></pre><p>Google Domains亡きあと、惰性でSquarespaceを使い続けているけれど、ずっとCloudflare Registrarに移行したいと思っている。（こういう地味な作業に腰が上がらなくなるの、確実に加齢の兆候だと思う。）</p><h2 id=10-nginxでリバースプロキシを設定>10. Nginxでリバースプロキシを設定</h2><p>Mattermostのポート8065番を、標準の80番/443番（HTTPS）に乗せかえる必要がある。</p><p>Let’s Encryptは、ポート80（HTTP）を使って認証するため、Mattermost が直接 8065番で動いてると認証できない。そこで、Nginxで80番を受付けてMattermostに中継（proxy）する形を取る。</p><pre tabindex=0><code>sudo apt install nginx
sudo nano /etc/nginx/sites-available/mattermost
</code></pre><pre tabindex=0><code>server {
    listen 80;
    server_name chat.chooning.app;

    location / {
        proxy_pass http://localhost:8065;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre><h6 id=heading-4>﻿</h6><p>有効化</p><pre tabindex=0><code># sites-available に置いた設定ファイルを sites-enabled にシンボリックリンクで追加
sudo ln -s /etc/nginx/sites-available/mattermost /etc/nginx/sites-enabled/

# 設定ファイルの文法チェック
sudo nginx -t

# Nginxの再読み込み（設定反映）
sudo systemctl reload nginx
</code></pre><h6 id=heading-5>﻿</h6><p>SSL化（HTTPS対応）</p><pre tabindex=0><code># certbot（証明書取得ツール）と nginx連携用のプラグインをインストール
sudo apt install certbot python3-certbot-nginx

# chat.chooning.app ドメインに対してSSL証明書を取得し、
# Nginxの設定に自動で組み込む（ポート443対応も自動設定される）
sudo certbot --nginx -d chat.chooning.app
</code></pre><p>メールアドレス入力、利用規約に同意、リダイレクト（HTTP→HTTPS）を Yes に。</p><h2 id=11-動作確認>11. 動作確認</h2><p>割り当てたドメインにブラウザでアクセスして確認</p><p><a href=http://chat.chooning.app>http://chat.chooning.app</a></p><div class=social-action><div class=social-action__left><div class=social-action__line><div class=social-action__line-icon></div><a href=https://lin.ee/eVcRqAC target=_blank>このブログの更新通知をLINEで受け取る</a></div></div><div class=social-action__right><a href="https://twitter.com/intent/tweet?text=Mattermost%e3%82%92%e3%82%bb%e3%83%ab%e3%83%95%e3%83%9b%e3%82%b9%e3%83%86%e3%82%a3%e3%83%b3%e3%82%b0%e3%81%99%e3%82%8b&url=https%3a%2f%2fezeroms.com%2fcolumn%2fmattermost%2f" target=_blank class=social-action__x data-show-count=false></a><a href=http://b.hatena.ne.jp/entry/https://ezeroms.com/column/mattermost/ target=_blank class=social-action__hatena></a><a class=social-action__link onclick='copyToClipboard("https://ezeroms.com/column/mattermost/")'></a><script>function copyToClipboard(){const e=window.location.href;navigator.clipboard.writeText(e).then(function(){showNotification()},function(e){console.error("リンクの保存に失敗しました: ",e)})}function showNotification(){var e=document.getElementById("notification");e.className="notification show",setTimeout(function(){e.className=e.className.replace(" show","")},3e3)}</script></div></div></article><div class=article-navigation><div class=article-navigation__prev><a href=/column/inktrap/ class=article-navigation__link><span class=article-navigation__icon>←</span><div class=article-navigation__content><span class=article-navigation__label>Prev</span>
<span class=article-navigation__title>インクトラップ（Inktrap）</span></div></a></div><div class=article-navigation__next><a href=/column/hugo-section-page-not-rendering/ class=article-navigation__link><span class=article-navigation__icon>→</span><div class=article-navigation__content><span class=article-navigation__label>Next</span>
<span class=article-navigation__title>Hugo v0.125以降で _index.md を使ったセクションページが表示されなくなった件</span></div></a></div><div class=article-navigation__back><a href=/column/ class=article-navigation__link><span class=article-navigation__title>記事一覧に戻る</span></a></div></div></ul></div></section></main><aside class=layout-tags aria-label=セカンダリーナビゲーション><div class=diary-secondary-nav><div class=diary-secondary-nav__section><div class=secondary-nav__tags><a href=/column_tag/ai/ class=tag data-tag=AI>AI</a>
<a href=/column_tag/contentful/ class=tag data-tag=Contentful>Contentful</a>
<a href=/column_tag/hugo/ class=tag data-tag=Hugo>Hugo</a>
<a href=/column_tag/mattermost/ class=tag data-tag=Mattermost>Mattermost</a>
<a href=/column_tag/netlify/ class=tag data-tag=Netlify>Netlify</a>
<a href=/column_tag/sns/ class=tag data-tag=SNS>SNS</a>
<a href=/column_tag/tinder/ class=tag data-tag=Tinder>Tinder</a>
<a href=/column_tag/web%E3%82%B5%E3%82%A4%E3%83%88/ class=tag data-tag=Webサイト>Webサイト</a>
<a href=/column_tag/%E3%82%A2%E3%83%8B%E3%83%A1/ class=tag data-tag=アニメ>アニメ</a>
<a href=/column_tag/%E3%82%BF%E3%82%A4%E3%83%9D%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3/ class=tag data-tag=タイポグラフィ>タイポグラフィ</a>
<a href=/column_tag/%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3/ class=tag data-tag=デザイン>デザイン</a>
<a href=/column_tag/%E3%83%86%E3%82%B9%E3%83%88/ class=tag data-tag=テスト>テスト</a>
<a href=/column_tag/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9/ class=tag data-tag=ニュース>ニュース</a>
<a href=/column_tag/%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E9%96%8B%E7%99%BA/ class=tag data-tag=プロダクト開発>プロダクト開発</a>
<a href=/column_tag/%E3%83%9E%E3%83%B3%E3%82%AC/ class=tag data-tag=マンガ>マンガ</a>
<a href=/column_tag/%E5%8F%B0%E6%B9%BE/ class=tag data-tag=台湾>台湾</a>
<a href=/column_tag/%E6%8A%80%E8%A1%93/ class=tag data-tag=技術>技術</a>
<a href=/column_tag/%E6%95%A3%E6%AD%A9/ class=tag data-tag=散歩>散歩</a>
<a href=/column_tag/%E6%96%87%E5%8C%96/ class=tag data-tag=文化>文化</a>
<a href=/column_tag/%E6%98%86%E8%99%AB%E9%A3%9F/ class=tag data-tag=昆虫食>昆虫食</a>
<a href=/column_tag/%E6%98%A0%E7%94%BB/ class=tag data-tag=映画>映画</a>
<a href=/column_tag/%E6%9B%B8%E7%B1%8D/ class=tag data-tag=書籍>書籍</a>
<a href=/column_tag/%E6%9C%AC/ class=tag data-tag=本>本</a>
<a href=/column_tag/%E6%BF%B1%E5%8F%A3%E7%AB%9C%E4%BB%8B/ class=tag data-tag=濱口竜介>濱口竜介</a></div></div></div></aside></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-K021MTL6NX"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K021MTL6NX")</script><script>(function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e();function e(){const e="https://ezeroms.com/",t=e?new URL(e).hostname:window.location.hostname,n=document.querySelectorAll(".article-item a[href]");n.forEach(function(e){const n=e.getAttribute("href");if(!n||e.hasAttribute("target"))return;if(n.startsWith("#")||n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||n.startsWith("http")&&new URL(n,window.location.href).hostname===t)return;(n.startsWith("http://")||n.startsWith("https://")||n.startsWith("//"))&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})}})()</script><script>(function(){function e(){const t=document.querySelector(".layout-sidebar"),e=document.getElementById("sidebar-minimize-btn");if(!t||!e)return;n(),e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.classList.toggle("is-minimized"),n()});function n(){const n=t.classList.contains("is-minimized");n?(e.setAttribute("aria-label","サイドバーを最大化"),e.setAttribute("data-tooltip","メニューを表示する"),e.querySelector("svg").style.transform="rotate(180deg)"):(e.setAttribute("aria-label","サイドバーを最小化"),e.setAttribute("data-tooltip","メニューを非表示にする"),e.querySelector("svg").style.transform="rotate(0deg)")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()})()</script><script>(function(){function e(){const e=document.querySelector(".layout-sidebar"),t=document.getElementById("sidebar-hamburger-btn"),s=document.getElementById("sidebar-overlay");if(!e||!t||!s)return;function i(){e.classList.add("is-open"),s.classList.add("is-active"),t.setAttribute("aria-label","メニューを閉じる"),t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"}function n(){e.classList.remove("is-open"),s.classList.remove("is-active"),t.setAttribute("aria-label","メニューを開く"),t.setAttribute("aria-expanded","false"),document.body.style.overflow=""}function a(){e.classList.contains("is-open")?n():i()}t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),a()}),s.addEventListener("click",function(e){e.preventDefault(),n()});const r=e.querySelectorAll("a");r.forEach(function(e){e.addEventListener("click",function(){window.innerWidth<=1079&&n()})}),document.addEventListener("keydown",function(t){t.key==="Escape"&&e.classList.contains("is-open")&&n()});let o;window.addEventListener("resize",function(){clearTimeout(o),o=setTimeout(function(){window.innerWidth>1079&&n()},100)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()})()</script><script>(function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e();function e(){const e=document.querySelector(".layout-header");if(!e){console.log("Header not found");return}if(e.children.length===0)return;let t=0,n=null,s=!1,o=!1;function i(){return window.pageYOffset||document.documentElement.scrollTop||0}function a(){const o=i();if(Math.abs(o-t)<1)return;const a=o>t,r=o<t;if(n&&(clearTimeout(n),n=null),o<=100){e.classList.remove("hidden"),s=!1,t=o;return}r?(e.classList.remove("hidden"),s=!1):a&&(e.classList.add("hidden"),s=!0),t=o,s&&(n=setTimeout(function(){e.classList.remove("hidden"),s=!1,n=null},3e3))}t=i(),window.addEventListener("scroll",function(){o||(window.requestAnimationFrame(function(){a(),o=!1}),o=!0)},{passive:!0}),a()}})()</script><script src=/js/tag-links.js></script><script src=/js/lazy-load.js></script></body></html>